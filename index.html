<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>SatranÃ§ HafÄ±za AntrenmanÄ±</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<style>
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0;padding:0;}
  body{margin:0;padding:0;overflow-x:hidden;background:#312e2b;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;}
  ::-webkit-scrollbar{display:none;}
  @keyframes fadeIn{from{opacity:0;transform:scale(.85)}to{opacity:1;transform:scale(1)}}
  @keyframes slideUp{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}
  @keyframes popIn{0%{transform:scale(0)}60%{transform:scale(1.12)}100%{transform:scale(1)}}
  @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
  button:active{transform:scale(.95)!important;}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const{useState,useRef,useEffect,useCallback}=React;

const FILES=["a","b","c","d","e","f","g","h"];
const RANKS=[8,7,6,5,4,3,2,1];

/* â•â•â•â•â•â•â•â• High Quality Chess Piece SVGs (cburnett/wiki style) â•â•â•â•â•â•â•â• */
const PieceSVG=({piece,size=60})=>{
  const isW=piece[0]==="w";
  const t=piece[1];
  const fill=isW?"#fff":"#000";
  const stroke=isW?"#000":"#000";
  const strokeW="1.5";
  const lineCap="round";
  const lineJoin="round";
  const style={fill,stroke,strokeWidth:strokeW,strokeLinecap:lineCap,strokeLinejoin:lineJoin};
  const lineStyle={fill:"none",stroke:isW?"#000":"#fff",strokeWidth:"1.5",strokeLinecap:lineCap};

  const pieces={
    /* â”€â”€ KING â”€â”€ */
    K:(
      <g style={style}>
        {/* Cross */}
        <path d="M 22.5,11.63 L 22.5,6" style={{fill:"none",stroke:isW?"#000":"#fff",strokeWidth:"1.5",strokeLinecap:lineCap}}/>
        <path d="M 20,8 L 25,8" style={{fill:"none",stroke:isW?"#000":"#fff",strokeWidth:"1.5",strokeLinecap:lineCap}}/>
        {/* Crown body */}
        <path d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25" style={{...style,fill:isW?"#fff":"#000",stroke:isW?"#000":"#000"}}/>
        {/* Body */}
        <path d={isW
          ?"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 11.5,30 11.5,30 L 11.5,37 Z"
          :"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 11.5,30 11.5,30 L 11.5,37 Z"
        }/>
        {/* Base */}
        <path d="M 11.5,30 C 17,27 27,27 32.5,30" style={lineStyle}/>
        <path d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5" style={lineStyle}/>
        <path d="M 11.5,37 C 17,34 27,34 32.5,37" style={lineStyle}/>
      </g>
    ),

    /* â”€â”€ QUEEN â”€â”€ */
    Q:(
      <g style={style}>
        {/* Crown circle */}
        <circle cx="6" cy="12" r="2.75" style={{...style}}/>
        <circle cx="14" cy="9" r="2.75" style={{...style}}/>
        <circle cx="22.5" cy="8" r="2.75" style={{...style}}/>
        <circle cx="31" cy="9" r="2.75" style={{...style}}/>
        <circle cx="39" cy="12" r="2.75" style={{...style}}/>
        {/* Body */}
        <path d={
          "M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 Z"
        }/>
        <path d="M 9,26 C 9,28 10.5,30 15.5,32 C 20.5,34 25,34 29.5,32 C 34.5,30 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 Z" style={{...style}}/>
        {/* Base */}
        <path d="M 9,37 C 9,37 17.5,41 27.5,41 C 37.5,41 36,37 36,37" style={{fill:"none",...style}}/>
        <path d={isW
          ?"M 9,37 C 12,34 18,31.5 22.5,31 C 27,31.5 33,34 36,37 C 36,37 36,39 36,39 C 27.5,41 17.5,41 9,39 C 9,39 9,37 9,37 Z"
          :"M 9,37 C 12,34 18,31.5 22.5,31 C 27,31.5 33,34 36,37 C 36,37 36,39 36,39 C 27.5,41 17.5,41 9,39 C 9,39 9,37 9,37 Z"
        }/>
        <path d="M 11.5,30 C 15,29 30,29 33.5,30" style={lineStyle}/>
        <path d="M 12,33.5 C 18,31 27,31 33,33.5" style={lineStyle}/>
      </g>
    ),

    /* â”€â”€ ROOK â”€â”€ */
    R:(
      <g style={style}>
        {/* Battlements */}
        <path d={
          "M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 Z"
        }/>
        <path d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 Z"/>
        <path d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 Z"/>
        <path d={
          "M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 Z"
        }/>
        <path d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 Z"/>
        <path d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 Z"/>
        {/* Lines */}
        <path d="M 12,35.5 L 33,35.5" style={lineStyle}/>
        <path d="M 13,31.5 L 32,31.5" style={lineStyle}/>
        <path d="M 14,29.5 L 31,29.5" style={lineStyle}/>
        <path d="M 14,16.5 L 31,16.5" style={lineStyle}/>
        <path d="M 11,14 L 34,14" style={lineStyle}/>
      </g>
    ),

    /* â”€â”€ BISHOP â”€â”€ */
    B:(
      <g style={style}>
        {/* Top */}
        <path d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 Z"/>
        {/* Body */}
        <path d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 Z"/>
        {/* Head circle */}
        <circle cx="22.5" cy="8" r="2.5" style={{...style}}/>
        {/* Slit */}
        <path d="M 17.5,26 L 27.5,26" style={lineStyle}/>
        <path d="M 15,30 L 30,30" style={lineStyle}/>
        {/* Base */}
        <path d="M 22.5,15.5 L 22.5,20.5" style={{fill:"none",stroke:isW?"#000":"#fff",strokeWidth:"1",strokeLinejoin:"miter"}}/>
        <path d="M 20,18 L 25,18" style={{fill:"none",stroke:isW?"#000":"#fff",strokeWidth:"1",strokeLinejoin:"miter"}}/>
      </g>
    ),

    /* â”€â”€ KNIGHT â”€â”€ */
    N:(
      <g style={{...style,strokeWidth:"1.5"}}>
        <path d={isW
          ?"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"
          :"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"
        } style={{...style}}/>
        <path d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10" style={{...style}}/>
        {/* Eye */}
        <circle cx="12" cy="25" r="1" style={{fill:isW?"#000":"#fff",stroke:"none"}}/>
        <circle cx="12" cy="25" r=".5" style={{fill:isW?"#000":"#000",stroke:"none"}}/>
        {/* Nostril */}
        <path d="M 9.5,25.5 A 0.5,0.5 0 0 0 8.5,26.5" style={{fill:"none",stroke:isW?"#000":"#fff",strokeWidth:"1"}}/>
      </g>
    ),

    /* â”€â”€ PAWN â”€â”€ */
    P:(
      <g style={style}>
        <path d={isW
          ?"M 22.5,9 C 19.79,9 17.609,11.11 17.609,13.66 C 17.609,14.89 18.12,16 18.95,16.79 C 16.11,18.24 14.09,21.2 14.09,24.65 C 14.09,26.07 14.44,27.41 15.06,28.58 C 12.82,29.98 9,33.25 9,39 L 36,39 C 36,33.25 32.18,29.98 29.94,28.58 C 30.56,27.41 30.91,26.07 30.91,24.65 C 30.91,21.2 28.89,18.24 26.05,16.79 C 26.88,16 27.39,14.89 27.39,13.66 C 27.39,11.11 25.21,9 22.5,9 Z"
          :"M 22.5,9 C 19.79,9 17.609,11.11 17.609,13.66 C 17.609,14.89 18.12,16 18.95,16.79 C 16.11,18.24 14.09,21.2 14.09,24.65 C 14.09,26.07 14.44,27.41 15.06,28.58 C 12.82,29.98 9,33.25 9,39 L 36,39 C 36,33.25 32.18,29.98 29.94,28.58 C 30.56,27.41 30.91,26.07 30.91,24.65 C 30.91,21.2 28.89,18.24 26.05,16.79 C 26.88,16 27.39,14.89 27.39,13.66 C 27.39,11.11 25.21,9 22.5,9 Z"
        }/>
      </g>
    )
  };

  return(
    <svg viewBox="0 0 45 45" width={size} height={size} style={{filter:"drop-shadow(1px 1px 2px rgba(0,0,0,.4))"}}>
      {pieces[t]}
    </svg>
  );
};

const PIECE_TYPES=["P","N","B","R","Q","K"];

/* â•â•â•â•â•â•â•â• MAIN APP â•â•â•â•â•â•â•â• */
function App(){
  const[pieceCount,setPieceCount]=useState(4);
  const[phase,setPhase]=useState("setup");
  const[originalBoard,setOriginalBoard]=useState({});
  const[userBoard,setUserBoard]=useState({});
  const[selectedPiece,setSelectedPiece]=useState(null);
  const[score,setScore]=useState(null);
  const[showOriginal,setShowOriginal]=useState(false);
  const[boardSize,setBoardSize]=useState(360);
  const scrollRef=useRef(null);
  const didScroll=useRef(false);

  useEffect(()=>{
    const u=()=>{
      const w=Math.min(window.innerWidth,520);
      const h=window.innerHeight*.55;
      setBoardSize(Math.floor(Math.min(w,h)/8)*8);
    };
    u();
    window.addEventListener("resize",u);
    return()=>window.removeEventListener("resize",u);
  },[]);

  useEffect(()=>{
    if(scrollRef.current&&!didScroll.current){
      scrollRef.current.scrollTo({top:(pieceCount-1)*44,behavior:"auto"});
      didScroll.current=true;
    }
  },[]);

  const cell=boardSize/8;
  const pSize=cell*.88;

  const genBoard=useCallback(()=>{
    const board={};
    const sqs=[];
    for(let r=0;r<8;r++)for(let f=0;f<8;f++)sqs.push(FILES[f]+""+RANKS[r]);
    for(let i=sqs.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[sqs[i],sqs[j]]=[sqs[j],sqs[i]];}
    const pool=["wK","wQ","wR","wR","wB","wB","wN","wN","wP","wP","wP","wP","wP","wP","wP","wP",
                 "bK","bQ","bR","bR","bB","bB","bN","bN","bP","bP","bP","bP","bP","bP","bP","bP"];
    for(let i=pool.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[pool[i],pool[j]]=[pool[j],pool[i]];}
    const n=Math.min(pieceCount,32);
    for(let i=0;i<n;i++)board[sqs[i]]=pool[i%pool.length];
    return board;
  },[pieceCount]);

  const start=()=>{
    const b=genBoard();
    setOriginalBoard(b);
    setUserBoard({});
    setSelectedPiece(null);
    setScore(null);
    setShowOriginal(false);
    setPhase("memorize");
  };

  const hide=()=>{
    setUserBoard({});
    setSelectedPiece(null);
    setPhase("recall");
  };

  const cellClick=(sq)=>{
    if(phase!=="recall")return;
    if(selectedPiece){
      setUserBoard(prev=>({...prev,[sq]:selectedPiece}));
    } else if(userBoard[sq]){
      const nb={...userBoard};
      delete nb[sq];
      setUserBoard(nb);
    }
  };

  const check=()=>{
    let correct=0;
    const total=Object.keys(originalBoard).length;
    Object.keys(originalBoard).forEach(sq=>{if(userBoard[sq]===originalBoard[sq])correct++;});
    const extra=Object.keys(userBoard).filter(sq=>!originalBoard[sq]).length;
    setScore({correct,total,extra});
    setPhase("result");
  };

  const reset=()=>{
    setPhase("setup");
    setOriginalBoard({});
    setUserBoard({});
    setSelectedPiece(null);
    setScore(null);
    setShowOriginal(false);
  };

  const sqColor=(fi,ri)=>(fi+ri)%2===0?"#EEEED2":"#769656";
  const sqText=(fi,ri)=>(fi+ri)%2===0?"#769656":"#EEEED2";

  const resultColor=(sq)=>{
    if(phase!=="result")return null;
    const o=originalBoard[sq],u=userBoard[sq];
    if(o&&u&&o===u)return"rgba(76,175,80,.55)";
    if(o&&(!u||u!==o))return"rgba(244,67,54,.5)";
    if(!o&&u)return"rgba(255,152,0,.5)";
    return null;
  };

  const dispBoard=phase==="memorize"||(phase==="result"&&showOriginal)?originalBoard:userBoard;
  const placed=Object.keys(userBoard).length;
  const nums=Array.from({length:32},(_,i)=>i+1);

  return(
    <div style={{
      minHeight:"100vh",background:"#312e2b",
      display:"flex",flexDirection:"column",alignItems:"center",
      color:"#e0e0d0",padding:"6px 0 20px"
    }}>
      <h1 style={{
        fontSize:"clamp(14px,3.2vw,19px)",fontWeight:"800",margin:"4px 0",
        color:"#f5f5dc",letterSpacing:"1px",textTransform:"uppercase",textAlign:"center"
      }}>â™Ÿ SatranÃ§ HafÄ±za AntrenmanÄ±</h1>

      {/* â”€â”€ SETUP â”€â”€ */}
      {phase==="setup"&&(
        <div style={{display:"flex",flexDirection:"column",alignItems:"center",margin:"10px 0",animation:"slideUp .4s ease"}}>
          <span style={{fontSize:"12px",color:"#a0a090",marginBottom:"8px",letterSpacing:"1px",textTransform:"uppercase"}}>TaÅŸ SayÄ±sÄ±</span>
          <div style={{
            position:"relative",height:"150px",width:"88px",overflow:"hidden",
            borderRadius:"16px",background:"rgba(255,255,255,.06)",
            border:"1px solid rgba(255,255,255,.1)"
          }}>
            <div style={{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",
              width:"74px",height:"42px",borderRadius:"10px",
              background:"rgba(118,150,86,.2)",border:"2px solid rgba(118,150,86,.6)",
              pointerEvents:"none",zIndex:2}}/>
            <div style={{position:"absolute",top:0,left:0,right:0,height:"50px",
              background:"linear-gradient(to bottom,#312e2b,transparent)",
              pointerEvents:"none",zIndex:3,borderRadius:"16px 16px 0 0"}}/>
            <div style={{position:"absolute",bottom:0,left:0,right:0,height:"50px",
              background:"linear-gradient(to top,#312e2b,transparent)",
              pointerEvents:"none",zIndex:3,borderRadius:"0 0 16px 16px"}}/>
            <div ref={scrollRef} style={{
              height:"100%",overflowY:"scroll",scrollSnapType:"y mandatory",
              WebkitOverflowScrolling:"touch",scrollbarWidth:"none"
            }} onScroll={e=>{
              const v=Math.max(1,Math.min(32,Math.round(e.target.scrollTop/44)+1));
              if(v!==pieceCount)setPieceCount(v);
            }}>
              <div style={{height:"54px"}}/>
              {nums.map(n=>(
                <div key={n} style={{
                  height:"44px",display:"flex",alignItems:"center",justifyContent:"center",
                  scrollSnapAlign:"center",
                  fontSize:n===pieceCount?"28px":"17px",
                  fontWeight:n===pieceCount?"bold":"normal",
                  color:n===pieceCount?"#EEEED2":"rgba(255,255,255,.2)",
                  transition:"all .15s",cursor:"pointer"
                }} onClick={()=>{
                  setPieceCount(n);
                  scrollRef.current?.scrollTo({top:(n-1)*44,behavior:"smooth"});
                }}>{n}</div>
              ))}
              <div style={{height:"54px"}}/>
            </div>
          </div>
          <button onClick={start} style={{
            marginTop:"18px",padding:"14px 50px",fontSize:"16px",fontWeight:"700",
            background:"#81b64c",color:"#fff",border:"none",borderRadius:"10px",
            cursor:"pointer",letterSpacing:"1px",textTransform:"uppercase",
            boxShadow:"0 4px 16px rgba(129,182,76,.4)",transition:"all .15s"
          }} onMouseOver={e=>e.target.style.transform="scale(1.05)"}
             onMouseOut={e=>e.target.style.transform="scale(1)"}>BaÅŸlat</button>
        </div>
      )}

      {/* â”€â”€ STATUS â”€â”€ */}
      {phase!=="setup"&&(
        <div style={{
          fontSize:"13px",marginBottom:"3px",fontWeight:"700",letterSpacing:".5px",
          textAlign:"center",animation:"slideUp .25s ease",
          color:phase==="memorize"?"#81b2e0":phase==="recall"?"#e0c56a":"#8ed48e"
        }}>
          {phase==="memorize"&&`${pieceCount} taÅŸÄ± ezberle!`}
          {phase==="recall"&&(selectedPiece
            ?`${selectedPiece[0]==="w"?"Beyaz":"Siyah"} ${({P:"Piyon",N:"At",B:"Fil",R:"Kale",Q:"Vezir",K:"Åah"})[selectedPiece[1]]} seÃ§ili â†’ kareye tÄ±kla`
            :"AÅŸaÄŸÄ±dan taÅŸ seÃ§ â†’ tahtaya yerleÅŸtir")}
          {phase==="result"&&score&&`${score.correct} / ${score.total} DoÄŸru`}
        </div>
      )}

      {/* â”€â”€ BOARD â”€â”€ */}
      {phase!=="setup"&&(
        <div style={{position:"relative",margin:"2px 0",overflow:"hidden",
          boxShadow:"0 6px 30px rgba(0,0,0,.6)",animation:"fadeIn .3s ease"}}>
          <div style={{
            display:"grid",
            gridTemplateColumns:`repeat(8,${cell}px)`,
            gridTemplateRows:`repeat(8,${cell}px)`,
            width:boardSize+"px",height:boardSize+"px"
          }}>
            {RANKS.map((rank,ri)=>
              FILES.map((file,fi)=>{
                const sq=file+rank;
                const bg=sqColor(fi,ri);
                const tc=sqText(fi,ri);
                const rc=resultColor(sq);
                const pc=dispBoard[sq];
                const fs=Math.max(10,cell*.19);
                return(
                  <div key={sq} onClick={()=>cellClick(sq)} style={{
                    width:cell,height:cell,backgroundColor:bg,
                    display:"flex",alignItems:"center",justifyContent:"center",
                    position:"relative",cursor:phase==="recall"?"pointer":"default"
                  }}>
                    {fi===0&&<span style={{position:"absolute",top:2,left:3,fontSize:fs,
                      fontWeight:"700",color:tc,lineHeight:"1",userSelect:"none"}}>{rank}</span>}
                    {ri===7&&<span style={{position:"absolute",bottom:1,right:3,fontSize:fs,
                      fontWeight:"700",color:tc,lineHeight:"1",userSelect:"none"}}>{file}</span>}
                    {rc&&<div style={{position:"absolute",inset:0,background:rc,zIndex:1}}/>}
                    {phase==="result"&&!showOriginal&&originalBoard[sq]&&userBoard[sq]!==originalBoard[sq]&&(
                      <div style={{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",zIndex:3,opacity:.4}}>
                        <PieceSVG piece={originalBoard[sq]} size={pSize*.58}/>
                      </div>
                    )}
                    {pc&&(
                      <div style={{position:"relative",zIndex:2,animation:phase==="memorize"?"popIn .3s ease":"fadeIn .15s ease"}}>
                        <PieceSVG piece={pc} size={pSize}/>
                      </div>
                    )}
                  </div>
                );
              })
            )}
          </div>
        </div>
      )}

      {/* â”€â”€ PIECE PALETTE â”€â”€ */}
      {phase==="recall"&&(
        <div style={{
          background:"#272421",padding:"6px 4px",width:boardSize+"px",
          animation:"slideUp .25s ease",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px"
        }}>
          <div style={{display:"flex",justifyContent:"center",gap:"2px",marginBottom:"3px"}}>
            {PIECE_TYPES.map(t=>{
              const pc="w"+t;
              const sel=selectedPiece===pc;
              const bw=Math.floor((boardSize-16)/7);
              return(
                <div key={pc} onClick={()=>setSelectedPiece(sel?null:pc)} style={{
                  width:bw,height:bw,display:"flex",alignItems:"center",justifyContent:"center",
                  borderRadius:"5px",cursor:"pointer",transition:"all .12s",
                  background:sel?"rgba(118,150,86,.4)":"rgba(255,255,255,.03)",
                  border:sel?"2px solid #8aba5a":"2px solid transparent",
                  transform:sel?"scale(1.08)":"scale(1)"
                }}>
                  <PieceSVG piece={pc} size={bw*.7}/>
                </div>
              );
            })}
            <div onClick={()=>setSelectedPiece(null)} style={{
              width:Math.floor((boardSize-16)/7),height:Math.floor((boardSize-16)/7),
              display:"flex",alignItems:"center",justifyContent:"center",
              borderRadius:"5px",cursor:"pointer",transition:"all .12s",
              background:!selectedPiece?"rgba(180,60,60,.3)":"rgba(255,255,255,.03)",
              border:!selectedPiece?"2px solid #b04040":"2px solid transparent",
              fontSize:Math.max(16,boardSize/18)+"px"
            }}>ğŸ—‘</div>
          </div>
          <div style={{display:"flex",justifyContent:"center",gap:"2px"}}>
            {PIECE_TYPES.map(t=>{
              const pc="b"+t;
              const sel=selectedPiece===pc;
              const bw=Math.floor((boardSize-16)/7);
              return(
                <div key={pc} onClick={()=>setSelectedPiece(sel?null:pc)} style={{
                  width:bw,height:bw,display:"flex",alignItems:"center",justifyContent:"center",
                  borderRadius:"5px",cursor:"pointer",transition:"all .12s",
                  background:sel?"rgba(118,150,86,.4)":"rgba(255,255,255,.03)",
                  border:sel?"2px solid #8aba5a":"2px solid transparent",
                  transform:sel?"scale(1.08)":"scale(1)"
                }}>
                  <PieceSVG piece={pc} size={bw*.7}/>
                </div>
              );
            })}
            <div style={{width:Math.floor((boardSize-16)/7),height:Math.floor((boardSize-16)/7)}}/>
          </div>
        </div>
      )}

      {/* â”€â”€ BUTTONS â”€â”€ */}
      <div style={{display:"flex",gap:"8px",margin:"10px 0 4px",flexWrap:"wrap",justifyContent:"center"}}>
        {phase==="memorize"&&(
          <button onClick={hide} style={{
            padding:"13px 40px",fontSize:"15px",fontWeight:"700",
            background:"#e07845",color:"#fff",border:"none",borderRadius:"10px",
            cursor:"pointer",letterSpacing:".5px",textTransform:"uppercase",
            boxShadow:"0 3px 14px rgba(224,120,69,.35)",transition:"all .15s"
          }} onMouseOver={e=>e.target.style.transform="scale(1.04)"}
             onMouseOut={e=>e.target.style.transform="scale(1)"}>Gizle &amp; BaÅŸla</button>
        )}
        {phase==="recall"&&(
          <button onClick={check} disabled={placed===0} style={{
            padding:"13px 40px",fontSize:"15px",fontWeight:"700",
            background:placed>0?"#81b64c":"rgba(255,255,255,.06)",
            color:placed>0?"#fff":"rgba(255,255,255,.2)",
            border:"none",borderRadius:"10px",
            cursor:placed>0?"pointer":"not-allowed",
            boxShadow:placed>0?"0 3px 14px rgba(129,182,76,.35)":"none",
            transition:"all .15s",letterSpacing:".5px",textTransform:"uppercase"
          }} onMouseOver={e=>{if(placed>0)e.target.style.transform="scale(1.04)";}}
             onMouseOut={e=>e.target.style.transform="scale(1)"}>âœ“ Bitti</button>
        )}
        {phase==="result"&&(
          <>
            <button onClick={()=>setShowOriginal(!showOriginal)} style={{
              padding:"11px 22px",fontSize:"14px",fontWeight:"700",
              background:showOriginal?"#5090c0":"rgba(255,255,255,.06)",
              color:"#fff",border:"1px solid rgba(255,255,255,.1)",
              borderRadius:"8px",cursor:"pointer",transition:"all .15s"
            }}>{showOriginal?"CevabÄ±m":"DoÄŸru Cevap"}</button>
            <button onClick={reset} style={{
              padding:"11px 26px",fontSize:"14px",fontWeight:"700",
              background:"#81b64c",color:"#fff",border:"none",borderRadius:"8px",
              cursor:"pointer",letterSpacing:".5px",textTransform:"uppercase",
              boxShadow:"0 3px 12px rgba(129,182,76,.3)",transition:"all .15s"
            }} onMouseOver={e=>e.target.style.transform="scale(1.04)"}
               onMouseOut={e=>e.target.style.transform="scale(1)"}>Tekrar Oyna</button>
          </>
        )}
      </div>

      {phase==="result"&&!showOriginal&&(
        <div style={{display:"flex",gap:"12px",fontSize:"11px",color:"#a0a090",
          margin:"0 0 4px",flexWrap:"wrap",justifyContent:"center"}}>
          {[["rgba(76,175,80,.65)","DoÄŸru"],["rgba(244,67,54,.6)","YanlÄ±ÅŸ"],["rgba(255,152,0,.6)","Fazla"]].map(([c,l])=>(
            <span key={l} style={{display:"flex",alignItems:"center",gap:"4px"}}>
              <span style={{width:11,height:11,borderRadius:2,background:c,display:"inline-block"}}/>{l}
            </span>
          ))}
        </div>
      )}

      {phase==="result"&&score&&(
        <div style={{
          marginTop:"8px",padding:"16px 30px",borderRadius:"12px",textAlign:"center",
          animation:"slideUp .4s ease",
          background:score.correct===score.total
            ?"linear-gradient(135deg,rgba(129,182,76,.15),rgba(129,182,76,.05))"
            :"linear-gradient(135deg,rgba(255,180,80,.08),rgba(255,180,80,.02))",
          border:`1px solid ${score.correct===score.total?"rgba(129,182,76,.35)":"rgba(255,180,80,.2)"}`
        }}>
          <div style={{
            fontSize:"38px",fontWeight:"800",
            color:score.correct===score.total?"#81b64c":"#e0b050",
            animation:score.correct===score.total?"pulse .6s ease":"none"
          }}>{score.correct===score.total?"ğŸ† MÃ¼kemmel!":Math.round(score.correct/score.total*100)+"%"}</div>
          <div style={{fontSize:"14px",color:"#a0a090",marginTop:"4px"}}>
            {score.correct} / {score.total} taÅŸ doÄŸru
            {score.extra>0&&` Â· ${score.extra} fazla taÅŸ`}
          </div>
        </div>
      )}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
